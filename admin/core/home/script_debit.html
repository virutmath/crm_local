<script>
    var debit_money_paid_ele = $('#debit_money_paid');
    var debit_date_ele = $('#debit_date_debit');
    debit_money_paid_ele.autoNumeric({
        mDec : 0,
        vMin : 0,
        vMax : total_money,
        lZero : 'deny'
    });
    debit_date_ele.datepicker({
        format : 'dd/mm/yyyy'
    });

    debit_money_paid_ele.unbind('keyup').on('keyup', function () {
        var money = $(this).autoNumeric('get');
        var debit = total_money - money;
        $('#debit_money_debit').val(number_format(debit));
    });
    $('form[name="debit_form"]').on('submit', function (e) {
        e.preventDefault();
        debitSubmit();
    });
    function debitSubmit() {
        var money = parseInt(debit_money_paid_ele.autoNumeric('get'));
        var date = debit_date_ele.val();
        if(money && money < total_money) {
            if(confirm('Bạn chắc chắn muốn thanh toán hóa đơn này? Lưu ý: sau khi thanh toán bạn sẽ không thể chỉnh sửa được hóa đơn.')) {
                realSubmit(money,date);
                debit_date_ele.closest('.mwindow').find('.mwindow-close').trigger('click');
                return true;
            }
        }else {
            alert('Số tiền thanh toán không phù hợp!');
        }
    }
</script>